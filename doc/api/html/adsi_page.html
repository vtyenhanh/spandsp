<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>spandsp: ADSI transmission and reception</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="css.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">spandsp
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('adsi_page.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ADSI transmission and reception </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="adsi_page_sec_1"></a>
What does it do?</h1>
<p>Although ADSI has a specific meaning in some places, the term is used here to indicate any form of Analogue Display Service Interface, which includes caller ID, SMS, and others.</p>
<p>The ADSI module provides for the transmission and reception of ADSI messages in various formats. Currently, the supported formats are: </p><pre class="fragment">- Bellcore/Telcordia GR-30 CORE CLASS (Custom Local Area Signaling Services) standard
  (North America, Australia, China, Taiwan, and Hong Kong).

- ETSI ETS 300 648, ETS 300 659-1 CLIP (Calling Line Identity Presentation) FSK standard
  (France, Germany, Norway, Italy, Spain, South Africa, Turkey, and the UK).

- ETSI Caller-ID support for the UK, British Telecom SIN227 and SIN242.

- ETSI ETS 300 648, ETS 300 659-1 CLIP (Calling Line Identity Presentation) DTMF standard
  variant 1 (Belgium, Brazil, Denmark, Finland, Iceland, India, Netherlands, Saudi Arabia,
  Sweden and Uruguay).

- ETSI ETS 300 648, ETS 300 659-1 CLIP (Calling Line Identity Presentation) DTMF standard
  variant 2 (Denmark and Holland).

- ETSI ETS 300 648, ETS 300 659-1 CLIP (Calling Line Identity Presentation) DTMF standard
  variant 3.

- ETSI ETS 300 648, ETS 300 659-1 CLIP (Calling Line Identity Presentation) DTMF standard
  variant 4. (Taiwan and Kuwait).

- ETSI Caller-ID support in UK (British Telecom), British Telecomm SIN227, SIN242.

- Nippon Telegraph &amp; Telephone Corporation JCLIP (Japanese Calling Line Identity
  Presentation) standard.

- Telecommunications Authority of Singapore ACLIP (Analog Calling Line Identity
  Presentation) standard.

- TDD (Telecommunications Device for the Deaf).
</pre><h1><a class="anchor" id="adsi_page_sec_2"></a>
How does it work?</h1>
<h1><a class="anchor" id="adsi_page_sec_2a"></a>
The Bellcore CLASS specification</h1>
<p>Most FSK based CLI formats are similar to the US CLASS one, which is as follows:</p>
<p>The alert tone for CLI during a call is at least 100ms of silence, then 2130Hz + 2750Hz for 88ms to 110ms. When CLI is presented at ringing time, this tone is not sent. In the US, CLI is usually sent between the first two rings. This silence period is long in the US, so the message fits easily. In other places, where the standard ring tone has much smaller silences, a line voltage reversal is used to wake up a power saving receiver, then the message is sent, then the phone begins to ring.</p>
<p>The message is sent using a Bell 202 FSK modem. The data rate is 1200 bits per second. The message protocol uses 8-bit data words (bytes), each bounded by a start bit and a stop bit.</p>
<p>Channel Carrier Message Message Data Checksum Seizure Signal Type Length Word(s) Word Signal Word Word</p>
<h1><a class="anchor" id="adsi_page_sec_2a1"></a>
CHANNEL SEIZURE SIGNAL</h1>
<p>The channel seizure is 30 continuous bytes of 55h (01010101), including the start and stop bits (i.e. 300 bits of alternations in total). This provides a detectable alternating function to the CPE (i.e. the modem data pump).</p>
<h1><a class="anchor" id="adsi_page_sec_2a2"></a>
CARRIER SIGNAL</h1>
<p>The carrier signal consists of 180 bits of 1s. This may be reduced to 80 bits of 1s for caller ID on call waiting.</p>
<h1><a class="anchor" id="adsi_page_sec_2a3"></a>
MESSAGE TYPE WORD</h1>
<p>Various message types are defined. The commonest ones for the US CLASS standard are: </p><pre class="fragment">- Type 0x04 (SDMF) - single data message. Simple caller ID (CND)
- Type 0x80 (MDMF) - multiple data message. A more flexible caller ID,
                     with extra information.
</pre><p>Other messages support message waiting, for voice mail, and other display features.</p>
<h1><a class="anchor" id="adsi_page_sec_2a4"></a>
MESSAGE LENGTH WORD</h1>
<p>The message length word specifies the total number of data words to follow.</p>
<h1><a class="anchor" id="adsi_page_sec_2a5"></a>
DATA WORDS</h1>
<p>The data words contain the actual message.</p>
<h1><a class="anchor" id="adsi_page_sec_2a6"></a>
CHECKSUM WORD</h1>
<p>The Checksum Word contains the twos complement of the modulo 256 sum of the other words in the data message (i.e., message type, message length, and data words). The receiving equipment may calculate the modulo 256 sum of the received words and add this sum to the received checksum word. A result of zero generally indicates that the message was correctly received. Message retransmission is not supported. The sumcheck word should be followed by a minimum of two stop bits.</p>
<h1><a class="anchor" id="adsi_page_sec_2b"></a>
The ETSI CLIP specification</h1>
<p>The ETSI CLIP specification uses similar messages to the Bellcore specification. They are not, however, identical. First, ETSI use the V.23 modem standard, rather than Bell 202. Second, different fields, and different message types are available.</p>
<p>The wake up indication generally differs from the Bellcore specification, to accomodate differences in European ring cadences.</p>
<h1><a class="anchor" id="adsi_page_sec_2c"></a>
The ETSI caller ID by DTMF specification</h1>
<p>CLI by DTMF is usually sent in a very simple way. The exchange does not give any prior warning (no reversal, or ring) to wake up the receiver. It just sends a string of DTMF digits. Around the world several variants of this basic scheme are used.</p>
<p>One variant of the digit string is used in Belgium, Brazil, Denmark, Finland, Iceland, India, Netherlands, Saudi Arabia, Sweden and Uruguay: </p><pre class="fragment">- A&lt;caller's phone number&gt;D&lt;redirected number&gt;B&lt;special information&gt;C
</pre><p>Each of these fields may be omitted. The following special information codes are defined </p><pre class="fragment">- "00" indicates the calling party number is not available.
- "10" indicates that the presentation of the calling party number is restricted.
</pre><p>A second variant of the digit string is one of the following: </p><pre class="fragment">- A&lt;caller's phone number&gt;#
- D1#     Number not available because the caller has restricted it.
- D2#     Number not available because the call is international.
- D3#     Number not available due to technical reasons.
</pre><p>A third variant of the digit string is used in Taiwan and Kuwait: </p><pre class="fragment">- D&lt;caller's phone number&gt;C
</pre><p>A forth variant of the digit string is used in Denmark and Holland: </p><pre class="fragment">- &lt;caller's phone number&gt;#
</pre><p>There is no distinctive start marker in this format.</p>
<h1><a class="anchor" id="adsi_page_sec_2d"></a>
The Japanese specification from NTT</h1>
<p>The Japanese caller ID specification is considerably different from any of the others. It uses V.23 modem signals, but the message structure is uniqeue. Also, the message is delivered while off hook. This results in a sequence </p><pre class="fragment">- The phone line rings
- CPE answers and waits for the caller ID message
- CPE hangs up on receipt of the caller ID message
- The phone line rings a second time
- The CPE answers a second time, connecting the called party with the caller.
</pre><p>Timeouts are, obviously, required to ensure this system behaves well when the caller ID message or the second ring are missing. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
