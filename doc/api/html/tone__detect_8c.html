<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>spandsp: tone_detect.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="css.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">spandsp
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('tone__detect_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tone_detect.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;floating_fudge.h&quot;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &quot;spandsp/telephony.h&quot;</code><br />
<code>#include &quot;<a class="el" href="alloc_8h_source.html">spandsp/alloc.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="complex_8h_source.html">spandsp/complex.h</a>&quot;</code><br />
<code>#include &quot;spandsp/complex_vector_float.h&quot;</code><br />
<code>#include &quot;spandsp/tone_detect.h&quot;</code><br />
<code>#include &quot;<a class="el" href="tone__generate_8h_source.html">spandsp/tone_generate.h</a>&quot;</code><br />
<code>#include &quot;spandsp/private/tone_detect.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae71449b1cc6e6250b91f539153a7a0d3"><td class="memItemLeft" align="right" valign="top"><a id="ae71449b1cc6e6250b91f539153a7a0d3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>M_PI</b>&#160;&#160;&#160;3.14159265358979323846264338327</td></tr>
<tr class="separator:ae71449b1cc6e6250b91f539153a7a0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0229bcbc2149952db50237add67778d5"><td class="memItemLeft" align="right" valign="top"><a id="a0229bcbc2149952db50237add67778d5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#a0229bcbc2149952db50237add67778d5">make_goertzel_descriptor</a> (<a class="el" href="structgoertzel__descriptor__s.html">goertzel_descriptor_t</a> *t, float freq, int samples)</td></tr>
<tr class="memdesc:a0229bcbc2149952db50237add67778d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a descriptor for use with either a Goertzel transform. <br /></td></tr>
<tr class="separator:a0229bcbc2149952db50237add67778d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cebe6eb1572e07f4e2863280e343d78"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#a2cebe6eb1572e07f4e2863280e343d78">goertzel_init</a> (<a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *s, <a class="el" href="structgoertzel__descriptor__s.html">goertzel_descriptor_t</a> *t)</td></tr>
<tr class="memdesc:a2cebe6eb1572e07f4e2863280e343d78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise the state of a Goertzel transform.  <a href="tone__detect_8c.html#a2cebe6eb1572e07f4e2863280e343d78">More...</a><br /></td></tr>
<tr class="separator:a2cebe6eb1572e07f4e2863280e343d78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02147dfb023239396fef955196ea1b7d"><td class="memItemLeft" align="right" valign="top"><a id="a02147dfb023239396fef955196ea1b7d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>goertzel_release</b> (<a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *s)</td></tr>
<tr class="separator:a02147dfb023239396fef955196ea1b7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fdef5e0cb4ea4e4389765014e61c0ff"><td class="memItemLeft" align="right" valign="top"><a id="a9fdef5e0cb4ea4e4389765014e61c0ff"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>goertzel_free</b> (<a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *s)</td></tr>
<tr class="separator:a9fdef5e0cb4ea4e4389765014e61c0ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fc815b8003dad6ba47717a243548d61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#a5fc815b8003dad6ba47717a243548d61">goertzel_reset</a> (<a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *s)</td></tr>
<tr class="memdesc:a5fc815b8003dad6ba47717a243548d61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the state of a Goertzel transform.  <a href="tone__detect_8c.html#a5fc815b8003dad6ba47717a243548d61">More...</a><br /></td></tr>
<tr class="separator:a5fc815b8003dad6ba47717a243548d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f52cc239dbc37c74fe2b4dda0379e91"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#a4f52cc239dbc37c74fe2b4dda0379e91">goertzel_update</a> (<a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *s, const int16_t amp[], int samples)</td></tr>
<tr class="memdesc:a4f52cc239dbc37c74fe2b4dda0379e91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the state of a Goertzel transform.  <a href="tone__detect_8c.html#a4f52cc239dbc37c74fe2b4dda0379e91">More...</a><br /></td></tr>
<tr class="separator:a4f52cc239dbc37c74fe2b4dda0379e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a234c635639361b6fb67ee6a96de005d7"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#a234c635639361b6fb67ee6a96de005d7">goertzel_result</a> (<a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *s)</td></tr>
<tr class="memdesc:a234c635639361b6fb67ee6a96de005d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate the final result of a Goertzel transform.  <a href="tone__detect_8c.html#a234c635639361b6fb67ee6a96de005d7">More...</a><br /></td></tr>
<tr class="separator:a234c635639361b6fb67ee6a96de005d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd00502eb1b78567c56cd17fcd0960c4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#acd00502eb1b78567c56cd17fcd0960c4">periodogram</a> (const <a class="el" href="structcomplexf__t.html">complexf_t</a> coeffs[], const <a class="el" href="structcomplexf__t.html">complexf_t</a> amp[], int len)</td></tr>
<tr class="separator:acd00502eb1b78567c56cd17fcd0960c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd1364f7a34bb1788abe25eef590d03"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#a6cd1364f7a34bb1788abe25eef590d03">periodogram_prepare</a> (<a class="el" href="structcomplexf__t.html">complexf_t</a> sum[], <a class="el" href="structcomplexf__t.html">complexf_t</a> diff[], const <a class="el" href="structcomplexf__t.html">complexf_t</a> amp[], int len)</td></tr>
<tr class="separator:a6cd1364f7a34bb1788abe25eef590d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80b6c2d7fb237552afaff75f6e7ac697"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#a80b6c2d7fb237552afaff75f6e7ac697">periodogram_apply</a> (const <a class="el" href="structcomplexf__t.html">complexf_t</a> coeffs[], const <a class="el" href="structcomplexf__t.html">complexf_t</a> sum[], const <a class="el" href="structcomplexf__t.html">complexf_t</a> diff[], int len)</td></tr>
<tr class="separator:a80b6c2d7fb237552afaff75f6e7ac697"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa22a93da5cf78ba02de59137d3a29d4d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#aa22a93da5cf78ba02de59137d3a29d4d">periodogram_generate_coeffs</a> (<a class="el" href="structcomplexf__t.html">complexf_t</a> coeffs[], float freq, int sample_rate, int window_len)</td></tr>
<tr class="separator:aa22a93da5cf78ba02de59137d3a29d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af94496cba3debb907da22dfa387a551f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#af94496cba3debb907da22dfa387a551f">periodogram_generate_phase_offset</a> (<a class="el" href="structcomplexf__t.html">complexf_t</a> *offset, float freq, int sample_rate, int interval)</td></tr>
<tr class="separator:af94496cba3debb907da22dfa387a551f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac40dbcda7e5cf47a427814a3fffd1c3d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tone__detect_8c.html#ac40dbcda7e5cf47a427814a3fffd1c3d">periodogram_freq_error</a> (const <a class="el" href="structcomplexf__t.html">complexf_t</a> *phase_offset, float scale, const <a class="el" href="structcomplexf__t.html">complexf_t</a> *last_result, const <a class="el" href="structcomplexf__t.html">complexf_t</a> *result)</td></tr>
<tr class="separator:ac40dbcda7e5cf47a427814a3fffd1c3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2cebe6eb1572e07f4e2863280e343d78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cebe6eb1572e07f4e2863280e343d78">&#9670;&nbsp;</a></span>goertzel_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a>* goertzel_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structgoertzel__descriptor__s.html">goertzel_descriptor_t</a> *&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise the state of a Goertzel transform. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The Goertzel context. If NULL, a context is allocated. </td></tr>
    <tr><td class="paramname">t</td><td>The Goertzel descriptor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the Goertzel state. </dd></dl>

</div>
</div>
<a id="a5fc815b8003dad6ba47717a243548d61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fc815b8003dad6ba47717a243548d61">&#9670;&nbsp;</a></span>goertzel_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void goertzel_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the state of a Goertzel transform. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The Goertzel context. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="dtmf_8c.html#af1c8f5fde7ff2778b55e2e44fb89d6c0">dtmf_rx_fillin()</a>, and <a class="el" href="tone__detect_8c.html#a234c635639361b6fb67ee6a96de005d7">goertzel_result()</a>.</p>

</div>
</div>
<a id="a234c635639361b6fb67ee6a96de005d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a234c635639361b6fb67ee6a96de005d7">&#9670;&nbsp;</a></span>goertzel_result()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float goertzel_result </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate the final result of a Goertzel transform. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The Goertzel context. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of the transform. The expected result for a pure sine wave signal of level x dBm0, at the very centre of the bin is: <a href="(samples_per_goertzel_block*32768.0/1.4142)*10^((x - DBM0_MAX_SINE_POWER)/20.0)">Floating point</a>^2 <a href="(samples_per_goertzel_block*256.0/1.4142)*10^((x - DBM0_MAX_SINE_POWER)/20.0)">Fixed point</a>^2 </dd></dl>

<p class="reference">References <a class="el" href="tone__detect_8c.html#a5fc815b8003dad6ba47717a243548d61">goertzel_reset()</a>.</p>

</div>
</div>
<a id="a4f52cc239dbc37c74fe2b4dda0379e91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f52cc239dbc37c74fe2b4dda0379e91">&#9670;&nbsp;</a></span>goertzel_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int goertzel_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgoertzel__state__t.html">goertzel_state_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int16_t&#160;</td>
          <td class="paramname"><em>amp</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the state of a Goertzel transform. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The Goertzel context. </td></tr>
    <tr><td class="paramname">amp</td><td>The samples to be transformed. </td></tr>
    <tr><td class="paramname">samples</td><td>The number of samples. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of samples unprocessed </dd></dl>

</div>
</div>
<a id="acd00502eb1b78567c56cd17fcd0960c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd00502eb1b78567c56cd17fcd0960c4">&#9670;&nbsp;</a></span>periodogram()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcomplexf__t.html">complexf_t</a> periodogram </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td>
          <td class="paramname"><em>coeffs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td>
          <td class="paramname"><em>amp</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Evaluate a periodogram. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">coeffs</td><td>A set of coefficients generated by <a class="el" href="tone__detect_8c.html#aa22a93da5cf78ba02de59137d3a29d4d">periodogram_generate_coeffs()</a>. </td></tr>
    <tr><td class="paramname">amp</td><td>The complex amplitude of the signal. </td></tr>
    <tr><td class="paramname">len</td><td>The length of the periodogram, in samples. This must be an even number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The periodogram result. </dd></dl>

</div>
</div>
<a id="a80b6c2d7fb237552afaff75f6e7ac697"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80b6c2d7fb237552afaff75f6e7ac697">&#9670;&nbsp;</a></span>periodogram_apply()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcomplexf__t.html">complexf_t</a> periodogram_apply </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td>
          <td class="paramname"><em>coeffs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td>
          <td class="paramname"><em>sum</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td>
          <td class="paramname"><em>diff</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Evaluate a periodogram, based on data prepared by <a class="el" href="tone__detect_8c.html#a6cd1364f7a34bb1788abe25eef590d03">periodogram_prepare()</a>. This is more efficient than using <a class="el" href="tone__detect_8c.html#acd00502eb1b78567c56cd17fcd0960c4">periodogram()</a> when several periodograms are to be applied to the same signal. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">coeffs</td><td>A set of coefficients generated by <a class="el" href="tone__detect_8c.html#aa22a93da5cf78ba02de59137d3a29d4d">periodogram_generate_coeffs()</a>. </td></tr>
    <tr><td class="paramname">sum</td><td>A vector of sums produced by <a class="el" href="tone__detect_8c.html#a6cd1364f7a34bb1788abe25eef590d03">periodogram_prepare()</a>. </td></tr>
    <tr><td class="paramname">diff</td><td>A vector of differences produced by <a class="el" href="tone__detect_8c.html#a6cd1364f7a34bb1788abe25eef590d03">periodogram_prepare()</a>. </td></tr>
    <tr><td class="paramname">len</td><td>The length of the periodogram, in samples. This must be an even number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The periodogram result. </dd></dl>

</div>
</div>
<a id="ac40dbcda7e5cf47a427814a3fffd1c3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac40dbcda7e5cf47a427814a3fffd1c3d">&#9670;&nbsp;</a></span>periodogram_freq_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float periodogram_freq_error </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structcomplexf__t.html">complexf_t</a> *&#160;</td>
          <td class="paramname"><em>phase_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcomplexf__t.html">complexf_t</a> *&#160;</td>
          <td class="paramname"><em>last_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcomplexf__t.html">complexf_t</a> *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Apply a phase offset, to find the frequency error between periodogram evaluations. specified interval. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">phase_offset</td><td>A point to the expected phase offset. </td></tr>
    <tr><td class="paramname">scale</td><td>The scaling factor to be used. </td></tr>
    <tr><td class="paramname">last_result</td><td>A pointer to the previous periodogram result. </td></tr>
    <tr><td class="paramname">result</td><td>A pointer to the current periodogram result. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The frequency error, in Hz. </dd></dl>

</div>
</div>
<a id="aa22a93da5cf78ba02de59137d3a29d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa22a93da5cf78ba02de59137d3a29d4d">&#9670;&nbsp;</a></span>periodogram_generate_coeffs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int periodogram_generate_coeffs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td>
          <td class="paramname"><em>coeffs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>window_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate a Hamming weighted coefficient set, to be used for a periodogram analysis. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">coeffs</td><td>The generated coefficients. </td></tr>
    <tr><td class="paramname">freq</td><td>The frequency to be matched by the periodogram, in Hz. </td></tr>
    <tr><td class="paramname">sample_rate</td><td>The sample rate of the signal, in samples per second. </td></tr>
    <tr><td class="paramname">window_len</td><td>The length of the periodogram window. This must be an even number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of generated coefficients. </dd></dl>

<p class="reference">References <a class="el" href="structcomplexf__t.html#a7983992ab77c3ec3875ffb04cbe943b1">complexf_t::im</a>, and <a class="el" href="structcomplexf__t.html#ae5653b224829d86c8757433c7d31567e">complexf_t::re</a>.</p>

</div>
</div>
<a id="af94496cba3debb907da22dfa387a551f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af94496cba3debb907da22dfa387a551f">&#9670;&nbsp;</a></span>periodogram_generate_phase_offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float periodogram_generate_phase_offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomplexf__t.html">complexf_t</a> *&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>interval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Generate the phase offset to be expected between successive periodograms evaluated at the specified interval. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">offset</td><td>A point to the generated phase offset. </td></tr>
    <tr><td class="paramname">freq</td><td>The frequency being matched by the periodogram, in Hz. </td></tr>
    <tr><td class="paramname">sample_rate</td><td>The sample rate of the signal, in samples per second. </td></tr>
    <tr><td class="paramname">interval</td><td>The interval between periodograms, in samples. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The scaling factor. </dd></dl>

<p class="reference">References <a class="el" href="structcomplexf__t.html#a7983992ab77c3ec3875ffb04cbe943b1">complexf_t::im</a>, and <a class="el" href="structcomplexf__t.html#ae5653b224829d86c8757433c7d31567e">complexf_t::re</a>.</p>

</div>
</div>
<a id="a6cd1364f7a34bb1788abe25eef590d03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cd1364f7a34bb1788abe25eef590d03">&#9670;&nbsp;</a></span>periodogram_prepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int periodogram_prepare </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td>
          <td class="paramname"><em>sum</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td>
          <td class="paramname"><em>diff</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcomplexf__t.html">complexf_t</a>&#160;</td>
          <td class="paramname"><em>amp</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Prepare data for evaluating a set of periodograms. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sum</td><td>A vector of sums of pairs of signal samples. This will be half the length of len. </td></tr>
    <tr><td class="paramname">diff</td><td>A vector of differences between pairs of signal samples. This will be half the length of len. </td></tr>
    <tr><td class="paramname">amp</td><td>The complex amplitude of the signal. </td></tr>
    <tr><td class="paramname">len</td><td>The length of the periodogram, in samples. This must be an even number. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of the vectors sum and diff. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="tone__detect_8c.html">tone_detect.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
