<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>spandsp: time_scale.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="css.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">spandsp
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('time__scale_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">time_scale.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &quot;<a class="el" href="stdbool_8h_source.html">spandsp/stdbool.h</a>&quot;</code><br />
<code>#include &quot;floating_fudge.h&quot;</code><br />
<code>#include &quot;spandsp/telephony.h&quot;</code><br />
<code>#include &quot;<a class="el" href="alloc_8h_source.html">spandsp/alloc.h</a>&quot;</code><br />
<code>#include &quot;spandsp/fast_convert.h&quot;</code><br />
<code>#include &quot;spandsp/vector_int.h&quot;</code><br />
<code>#include &quot;<a class="el" href="saturated_8h_source.html">spandsp/saturated.h</a>&quot;</code><br />
<code>#include &quot;spandsp/time_scale.h&quot;</code><br />
<code>#include &quot;spandsp/private/time_scale.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1b25fc362733dcb2eaf07631c82452d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#a1b25fc362733dcb2eaf07631c82452d8">time_scale_rate</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s, float playout_rate)</td></tr>
<tr class="memdesc:a1b25fc362733dcb2eaf07631c82452d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the time scale rate.  <a href="time__scale_8c.html#a1b25fc362733dcb2eaf07631c82452d8">More...</a><br /></td></tr>
<tr class="separator:a1b25fc362733dcb2eaf07631c82452d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93c9a1e29a9599e58cd67a116e8f6ca9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#a93c9a1e29a9599e58cd67a116e8f6ca9">time_scale</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s, int16_t out[], int16_t in[], int len)</td></tr>
<tr class="memdesc:a93c9a1e29a9599e58cd67a116e8f6ca9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time scale a chunk of audio samples.  <a href="time__scale_8c.html#a93c9a1e29a9599e58cd67a116e8f6ca9">More...</a><br /></td></tr>
<tr class="separator:a93c9a1e29a9599e58cd67a116e8f6ca9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd11c5a86d89adecdfd308cf1e883730"><td class="memItemLeft" align="right" valign="top"><a id="afd11c5a86d89adecdfd308cf1e883730"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>time_scale_flush</b> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s, int16_t out[])</td></tr>
<tr class="separator:afd11c5a86d89adecdfd308cf1e883730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aec7a7a04b260c861c599ce4e348a39"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#a2aec7a7a04b260c861c599ce4e348a39">time_scale_max_output_len</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s, int input_len)</td></tr>
<tr class="memdesc:a2aec7a7a04b260c861c599ce4e348a39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find the maximum possible output samples.  <a href="time__scale_8c.html#a2aec7a7a04b260c861c599ce4e348a39">More...</a><br /></td></tr>
<tr class="separator:a2aec7a7a04b260c861c599ce4e348a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b40dfa83181a7096fb2a6779add3ace"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#a3b40dfa83181a7096fb2a6779add3ace">time_scale_init</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s, int sample_rate, float playout_rate)</td></tr>
<tr class="memdesc:a3b40dfa83181a7096fb2a6779add3ace"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialise a time scale context.  <a href="time__scale_8c.html#a3b40dfa83181a7096fb2a6779add3ace">More...</a><br /></td></tr>
<tr class="separator:a3b40dfa83181a7096fb2a6779add3ace"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae185090ffb2b3fe9b8e97003bb64853"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#aae185090ffb2b3fe9b8e97003bb64853">time_scale_release</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s)</td></tr>
<tr class="memdesc:aae185090ffb2b3fe9b8e97003bb64853"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a time scale context.  <a href="time__scale_8c.html#aae185090ffb2b3fe9b8e97003bb64853">More...</a><br /></td></tr>
<tr class="separator:aae185090ffb2b3fe9b8e97003bb64853"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90b26de72050f72ebf5cf42334ecf743"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#a90b26de72050f72ebf5cf42334ecf743">time_scale_free</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s)</td></tr>
<tr class="memdesc:a90b26de72050f72ebf5cf42334ecf743"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free a time scale context.  <a href="time__scale_8c.html#a90b26de72050f72ebf5cf42334ecf743">More...</a><br /></td></tr>
<tr class="separator:a90b26de72050f72ebf5cf42334ecf743"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a93c9a1e29a9599e58cd67a116e8f6ca9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93c9a1e29a9599e58cd67a116e8f6ca9">&#9670;&nbsp;</a></span>time_scale()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_scale </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>out</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>in</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Time scale a chunk of audio samples. </p>
<p>Time scale a chunk of audio samples. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The time scale context. </td></tr>
    <tr><td class="paramname">out</td><td>The output audio sample buffer. This must be large enough to accept the longest possible result from processing the input data. See the algorithm documentation for how the longest possible result may be calculated. </td></tr>
    <tr><td class="paramname">in</td><td>The input audio sample buffer. </td></tr>
    <tr><td class="paramname">len</td><td>The number of input samples. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of output samples. </dd></dl>

<p class="reference">References <a class="el" href="structtime__scale__state__s.html#a8e1b3a49de801aaac492e6c8d53de8aa">time_scale_state_s::buf</a>, <a class="el" href="structtime__scale__state__s.html#a13d991dbcc342594ab33fed31b9f8405">time_scale_state_s::buf_len</a>, <a class="el" href="structtime__scale__state__s.html#a8774c4fc18cb287d71105ffe9ae9fc5c">time_scale_state_s::fill</a>, and <a class="el" href="structtime__scale__state__s.html#a92000f358c3236fcd661e934fa728d0e">time_scale_state_s::playout_rate</a>.</p>

</div>
</div>
<a id="a90b26de72050f72ebf5cf42334ecf743"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90b26de72050f72ebf5cf42334ecf743">&#9670;&nbsp;</a></span>time_scale_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_scale_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free a time scale context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The time scale context. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for OK, else -1. </dd></dl>

</div>
</div>
<a id="a3b40dfa83181a7096fb2a6779add3ace"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b40dfa83181a7096fb2a6779add3ace">&#9670;&nbsp;</a></span>time_scale_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a>* time_scale_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>playout_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialise a time scale context. </p>
<p>Initialise a time scale context. This must be called before the first use of the context, to initialise its contents. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The time scale context. </td></tr>
    <tr><td class="paramname">sample_rate</td><td>The sample rate of the signal. </td></tr>
    <tr><td class="paramname">playout_rate</td><td>The ratio between the output speed and the input speed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the context, or NULL if there was a problem. </dd></dl>

</div>
</div>
<a id="a2aec7a7a04b260c861c599ce4e348a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2aec7a7a04b260c861c599ce4e348a39">&#9670;&nbsp;</a></span>time_scale_max_output_len()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_scale_max_output_len </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>input_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find the maximum possible output samples. </p>
<p>Find the maximum possible samples which could result from scaling the specified number of input samples, at the current playback rate. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The time scale context. </td></tr>
    <tr><td class="paramname">input_len</td><td>The number of input samples. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The maximum possible output samples. </dd></dl>

<p class="reference">References <a class="el" href="structtime__scale__state__s.html#a01e2264fe8d5a3f71e47183ab5188acb">time_scale_state_s::min_pitch</a>, and <a class="el" href="structtime__scale__state__s.html#a92000f358c3236fcd661e934fa728d0e">time_scale_state_s::playout_rate</a>.</p>

</div>
</div>
<a id="a1b25fc362733dcb2eaf07631c82452d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b25fc362733dcb2eaf07631c82452d8">&#9670;&nbsp;</a></span>time_scale_rate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_scale_rate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>playout_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the time scale rate. </p>
<p>Change the time scale rate. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The time scale context. </td></tr>
    <tr><td class="paramname">playout_rate</td><td>The ratio between the output speed and the input speed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if changed OK, else -1. </dd></dl>

<p class="reference">References <a class="el" href="structtime__scale__state__s.html#a92000f358c3236fcd661e934fa728d0e">time_scale_state_s::playout_rate</a>.</p>

</div>
</div>
<a id="aae185090ffb2b3fe9b8e97003bb64853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae185090ffb2b3fe9b8e97003bb64853">&#9670;&nbsp;</a></span>time_scale_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_scale_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release a time scale context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The time scale context. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for OK, else -1. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="time__scale_8c.html">time_scale.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
